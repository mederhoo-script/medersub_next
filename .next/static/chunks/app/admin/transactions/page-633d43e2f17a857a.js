(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4426],{1878:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4637:(e,t,r)=>{Promise.resolve().then(r.bind(r,7241))},6296:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7241:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),i=r(1878),n=r(6296),l=r(9722);function c(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),[d,o]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/transactions"),r=await e.json();Array.isArray(r)&&t(r)}catch(e){console.error("Failed to fetch transactions",e)}finally{c(!1)}})()},[]);let x=e.filter(e=>e.reference?.toLowerCase().includes(d.toLowerCase())||e.profiles?.email?.toLowerCase().includes(d.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Transaction Logs"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search ref or email...",value:d,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(n.A,{className:"h-8 w-8 animate-spin text-blue-500"})})})}):0===x.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No transactions found."})}):x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.reference}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,s.jsx)("div",{children:e.profiles?.full_name||"Unknown"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.profiles?.email})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 uppercase",children:e.type}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:(0,s.jsxs)("span",{className:"deposit"===e.type?"text-green-600":"text-gray-900",children:["deposit"===e.type?"+":"-","â‚¦",e.amount?.toLocaleString()]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:(0,l.A)("px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize","success"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:("success"===e.status||"failed"===e.status)&&"refund"!==e.type&&"deposit"!==e.type&&(0,s.jsx)("button",{onClick:async()=>{if(confirm("Are you sure you want to refund this transaction?"))try{(await fetch("/api/admin/transactions/refund",{method:"POST",body:JSON.stringify({transactionId:e.id,reason:"Admin Manual Refund"})})).ok?(alert("Refund Successful"),window.location.reload()):alert("Refund Failed")}catch(e){alert("Error processing refund")}},className:"text-red-600 hover:text-red-900 bg-red-50 px-3 py-1 rounded-md text-xs",children:"Refund"})})]},e.id))})]})})]})}},8340:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...o},x)=>(0,s.createElement)("svg",{ref:x,...n,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",l),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...n},c)=>(0,s.createElement)(l,{ref:c,iconNode:t,className:i(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n}));return r.displayName=a(e),r}},9722:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}(e))&&(s&&(s+=" "),s+=t);return s}}},e=>{e.O(0,[8441,8928,7358],()=>e(e.s=4637)),_N_E=e.O()}]);