(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{723:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8340).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1142:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(6622).createBrowserClient)("https://arbagxcbwqmquydrowjw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyYmFneGNid3FtcXV5ZHJvd2p3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NjIwMjMsImV4cCI6MjA3MjEzODAyM30.k7-oHFYulHIWs56vBzhQnClvJAlLfhyhdL7rZuauAfk")},1430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),a=s(2115),l=s(1142),i=s(723),n=s(5237),o=s(6296),d=s(3321),c=s(8500),u=s.n(c);let m=[{id:"MTN",name:"MTN",color:"bg-yellow-400",serviceId:"1"},{id:"AIRTEL",name:"Airtel",color:"bg-red-500",serviceId:"4"},{id:"GLO",name:"Glo",color:"bg-green-500",serviceId:"2"},{id:"9MOBILE",name:"9mobile",color:"bg-green-700",serviceId:"3"}];function h(){let e=(0,d.useRouter)(),[t,s]=(0,a.useState)(m[0]),[c,h]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[y,f]=(0,a.useState)(null),N=((e,t)=>{let s=Number(e);if(!s)return 0;return s-s*("MTN"===t||"AIRTEL"===t?.01:.02)})(c,t.id),j=async s=>{s.preventDefault(),p(!0),f(null);try{let{data:{user:s}}=await l.N.auth.getUser();if(!s)return void e.push("/login");let r=await fetch("/api/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,serviceType:"AIRTIME",amount:Number(c),mobileNumber:x,serviceID:t.serviceId,network:t.id})}),a=await r.json();a.error?f({type:"error",msg:a.error}):(f({type:"success",msg:"Airtime purchase successful!"}),h(""),b(""),e.refresh())}catch(e){f({type:"error",msg:"Something went wrong."})}finally{p(!1)}};return(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)(u(),{href:"/dashboard",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)(i.A,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Buy Airtime"}),(0,r.jsx)("h1",{className:"text-2xl  font-bold text-blue-600 tracking-tight",children:"MEDERSUB"})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:(0,r.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Network"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-3",children:m.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>s(e),className:`flex flex-col items-center p-3 rounded-xl border-2 transition-all ${t.id===e.id?"border-blue-600 bg-blue-50":"border-transparent bg-gray-50 hover:bg-gray-100"}`,children:[(0,r.jsx)("div",{className:`h-8 w-8 rounded-full ${e.color} mb-2`}),(0,r.jsx)("span",{className:"text-xs font-semibold",children:e.name})]},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"tel",required:!0,value:x,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"08012345678"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (₦)"}),(0,r.jsx)("input",{type:"number",required:!0,min:"50",value:c,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg font-semibold",placeholder:"1000"}),c&&(0,r.jsxs)("div",{className:"mt-2 text-right",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"You pay: "}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["₦",N.toFixed(2)]})]}),(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:["100","200","500","1000"].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>h(e),className:"px-3 py-1 text-xs font-medium bg-gray-100 hover:bg-gray-200 rounded-full text-gray-600 transition-colors",children:["₦",e]},e))})]}),y&&(0,r.jsx)("div",{className:`p-4 rounded-xl text-sm ${"success"===y.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:y.msg}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors disabled:opacity-70 flex items-center justify-center gap-2",children:g?(0,r.jsx)(o.A,{className:"h-5 w-5 animate-spin"}):`Pay ₦${N>0?N.toFixed(2):"0.00"}`})]})})]})}},3321:(e,t,s)=>{"use strict";var r=s(4645);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},5237:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8340).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},6296:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8936:(e,t,s)=>{Promise.resolve().then(s.bind(s,1430))}},e=>{e.O(0,[8500,4293,8441,8928,7358],()=>e(e.s=8936)),_N_E=e.O()}]);