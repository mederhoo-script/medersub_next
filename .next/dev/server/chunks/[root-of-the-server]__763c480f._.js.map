{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/mederhoo/vtu/vtu-platform/lib/supabase-admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!\n\n// Client for server-side admin tasks (bypass RLS)\n// Ensure this is only imported in server components/routes\nexport const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;AAIzD,MAAM,gBAAgB,IAAA,gMAAY,EAAC,aAAa"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///home/mederhoo/vtu/vtu-platform/app/api/admin/settings/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { supabaseAdmin } from '@/lib/supabase-admin';\n\nexport async function GET() {\n    // Return key-value map of settings\n    const { data, error } = await supabaseAdmin.from('system_settings').select('*');\n    if (error) return NextResponse.json({ error: error.message }, { status: 500 });\n\n    // Convert array to object: { \"general\": { ... } }\n    const settingsMap = data.reduce((acc: any, curr: any) => {\n        acc[curr.key] = curr.value;\n        return acc;\n    }, {});\n\n    return NextResponse.json(settingsMap);\n}\n\nexport async function POST(req: Request) {\n    try {\n        const { key, value } = await req.json();\n\n        const { error } = await supabaseAdmin\n            .from('system_settings')\n            .upsert({ key, value, updated_at: new Date() });\n\n        if (error) return NextResponse.json({ error: error.message }, { status: 500 });\n\n        return NextResponse.json({ success: true });\n    } catch (err: any) {\n        return NextResponse.json({ error: err.message }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IAClB,mCAAmC;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAa,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC;IAC3E,IAAI,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO,MAAM,OAAO;IAAC,GAAG;QAAE,QAAQ;IAAI;IAE5E,kDAAkD;IAClD,MAAM,cAAc,KAAK,MAAM,CAAC,CAAC,KAAU;QACvC,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK;QAC1B,OAAO;IACX,GAAG,CAAC;IAEJ,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;QAErC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAa,CAChC,IAAI,CAAC,mBACL,MAAM,CAAC;YAAE;YAAK;YAAO,YAAY,IAAI;QAAO;QAEjD,IAAI,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;QAE5E,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC7C,EAAE,OAAO,KAAU;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACJ"}}]
}