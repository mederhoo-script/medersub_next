{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/mederhoo/vtu/vtu-platform/app/admin/transactions/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { Loader2, Search, ArrowUpRight, ArrowDownLeft } from 'lucide-react';\nimport clsx from 'clsx';\n\nexport default function AdminTransactionsPage() {\n    const [transactions, setTransactions] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        const fetchTx = async () => {\n            try {\n                const res = await fetch('/api/admin/transactions');\n                const data = await res.json();\n                if (Array.isArray(data)) {\n                    setTransactions(data);\n                }\n            } catch (error) {\n                console.error('Failed to fetch transactions', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchTx();\n    }, []);\n\n    const filteredTx = transactions.filter(tx =>\n        tx.reference?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        tx.profiles?.email?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Transaction Logs</h1>\n                <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Search ref or email...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64\"\n                    />\n                </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Reference</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount</th>\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {loading ? (\n                            <tr>\n                                <td colSpan={6} className=\"px-6 py-8 text-center\">\n                                    <div className=\"flex justify-center\"><Loader2 className=\"h-8 w-8 animate-spin text-blue-500\" /></div>\n                                </td>\n                            </tr>\n                        ) : filteredTx.length === 0 ? (\n                            <tr>\n                                <td colSpan={6} className=\"px-6 py-8 text-center text-gray-500\">\n                                    No transactions found.\n                                </td>\n                            </tr>\n                        ) : (\n                            filteredTx.map((tx) => (\n                                <tr key={tx.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                                        {tx.reference}\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        <div>{tx.profiles?.full_name || 'Unknown'}</div>\n                                        <div className=\"text-xs text-gray-400\">{tx.profiles?.email}</div>\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 uppercase\">\n                                        {tx.type}\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-semibold\">\n                                        <span className={tx.type === 'deposit' ? 'text-green-600' : 'text-gray-900'}>\n                                            {tx.type === 'deposit' ? '+' : '-'}â‚¦{tx.amount?.toLocaleString()}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                                        <span className={clsx(\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize\",\n                                            tx.status === 'success' ? 'bg-green-100 text-green-800' :\n                                                tx.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'\n                                        )}>\n                                            {tx.status}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500\">\n                                        {new Date(tx.created_at).toLocaleDateString()}\n                                    </td>\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                        {(tx.status === 'success' || tx.status === 'failed') && tx.type !== 'refund' && tx.type !== 'deposit' && (\n                                            <button\n                                                onClick={async () => {\n                                                    if (!confirm('Are you sure you want to refund this transaction?')) return;\n                                                    try {\n                                                        const res = await fetch('/api/admin/transactions/refund', {\n                                                            method: 'POST',\n                                                            body: JSON.stringify({ transactionId: tx.id, reason: 'Admin Manual Refund' })\n                                                        });\n                                                        if (res.ok) {\n                                                            alert('Refund Successful');\n                                                            window.location.reload();\n                                                        } else {\n                                                            alert('Refund Failed');\n                                                        }\n                                                    } catch (e) { alert('Error processing refund'); }\n                                                }}\n                                                className=\"text-red-600 hover:text-red-900 bg-red-50 px-3 py-1 rounded-md text-xs\"\n                                            >\n                                                Refund\n                                            </button>\n                                        )}\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js","sources":["file:///home/mederhoo/vtu/vtu-platform/node_modules/lucide-react/src/icons/loader-circle.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAuB;IAAC;QAAC,MAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,6BAAA,CAAA;YAA+B,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAC;CAAA;AAalG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,YAAA,CAAA,CAAA,KAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8JAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/search.js","sources":["file:///home/mederhoo/vtu/vtu-platform/node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 21-4.34-4.34', key: '14j7rj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAoB,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACjD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAU;YAAE,CAAA,CAAA,CAAA,CAAI,IAAA,CAAA;YAAM,CAAA,CAAA,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAG,CAAA,CAAA,CAAA;YAAK,CAAA,CAAA,CAAA,CAAA,CAAK,QAAA;QAAA,CAAU;KAAA;CAC1D;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,MAAA,CAAA,CAAA,KAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8JAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}}]
}